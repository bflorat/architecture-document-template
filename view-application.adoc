# Application view
:sectnumlevels: 4
:toclevels: 4
:sectnums: 4
:toc: left
:icons: font
:toc-title: Table of contents

[PRE-FILLED]
====
*Last modification* : _{docdate}_

*Date of last full review* : 

*Document status* :  

====

TIP: Regularly perform full reviews of this view (at least once a year while the project is active) and record the date here.

TIP: Indicate the status of the view, for example 'DRAFT', 'FINALIZED', ...


//üè∑{"id": "74c82505-5f47-4342-8f1b-f6951d603062", "labels": ["context"]}
## Introduction

This is the application point of view of the project. It describes the application modules in play and their exchanges.

The other views of the document are accessible link:./README.adoc[from here].

The project glossary is available link:glossary.adoc[here]. We will not redefine the functional or technical terms used here.

//üè∑{"id": "c182158d-40af-4840-b8f2-3a2a030c95af", "labels": ["references"]}
### Reference Documentation

Mention here the reference (defined at a IS level) architecture documents. This file should never summarize their content under penalty of quickly becoming obsolete and unmaintainable.

[PRE-FILLED]
====
[cols="1,1,4,4"]
|===
| N ¬∞ | Version | Document title / URL | Detail
|
|
|
|

|===
====

//üè∑{"id": "946b3119-a878-47ca-86f2-4c9e22ef0c89", "labels": ["uncertainty"]}
## Not ruled

TIP: In architecture, uncertainty should be stated clearly to help understand design choices and the current situation.


//üè∑{"id": "0f9d2e4a-3c71-4b9e-8f3b-2b8c7d1e9a60", "labels": ["uncertainty"]}
### Points subject to further study

====
Example:

[cols="1e,6e,1e,1e,1e"]
|===
| Subject | Detail | Status | Subject bearer | Deadline

| Use of Y services
| Depending on the progress of project Y, this module could call the services of the latter or those of the former module Z
| PENDING
| Project Y team
| BEFORE 2040
|===
====

[PRE-FILLED]
====
[cols="1,6,1,1,1"]
|===
| Subject | Detail | Status | Subject bearer | Deadline

| 
| 
| 
| 
| 
|===
====

//üè∑{"id": "7a1cdb2e-4f52-42a1-9c3e-6e0f2d3a8b91", "labels": ["uncertainty"]}
### Assumptions

[TIP]
====
Give here the structuring assumptions taken for the design.

Example: 
[cols="1e,6e"]
|===
| ID | Detail

| HA1
| Even if the decision to generalize the centralized directory is not fully endorsed, the application will rely on it and not on a local directory.
|===
====

[PRE-FILLED]
====
[cols="1,6"]
|===
| ID | Detail

|
|
|===
====
//üè∑{"id": "382fd086-f48e-4ad5-9911-07e3de281971", "labels": ["detail_level::overview"]}
## General context

//üè∑{"id": "a2b4c6d8-e0f1-4a2b-9c3d-5e6f7a8b9c0d", "labels": []}
### Objectives

[TIP]
Briefly describe the project and recall its objectives. Highlight those which are structuring for the architecture.

====
Example 1: This application allows suppliers invoices digitization and easy consultation of these documents by the accounting services.
====
====
Example 2: This project is the rewrite in web technologies of the X legacy application. It should ease the maintenance.
====
====
Example 3: The X application is one of the main modules of the Y program. It leverages the person and billing repositories to enrich the CMS with real-time customer data.
====

//üè∑{"id": "c1d2e3f4-a5b6-4c7d-8e9f-0123456789ab", "labels": ["rewrite"]}
### Existing

[TIP]
If this document presents a redesign or migration project, describe briefly the existing application. Do not repeat the documentation, simply refer to it and point to its architecture document if available. Beware of mentioning any information with a strong impact on the new project.
====
Example 1: The GOLD application is a Client-Server application in FORMS 4 pointing to an Oracle 9i database. Its architecture document is given in [REFxyz].
====
====
Example 2: The existing application is based on an LDAP directory for its authorizations. The new project has to coexist temporary with the former one. Thus, it is important to manage concurrent accesses as well as the coherence of LDAP during the tiling period.
====

//üè∑{"id": "67bbae56-5ed3-4977-8467-2c951882d1a9", "labels": ["project_size::large"]}
### Positioning in the IS

[TIP]
If the IS is urbanized, identify the block concerned by the project.

//üè∑{"id": "9ca40d05-ab6e-42ab-aa3c-b9724373ae7f", "labels": []}
### Actors

#### Internal actors

[TIP]
====
By the term "internal", the IT team project refers to actors belonging to the organization. These actors can be humans or application modules.

Example:

|===
| Actor | Description | Population | Location

| Administration system B
| Provides company accounting data
| N/A
| Berlin site

| Agent
| Back-office agent
| 100
| London site

|===

====

[PRE-FILLED]
====
[cols="1,1,4,4"]
|===
| Actor | Description | Population | Location

| 
| 
| 
| 

|===
====

#### External actors

====
Example:
[cols="e,e,e,e"]
|===
| Actor | Description | Population | Location

| Web client
| A company from a PC
| Max 1M
| 10 calls to the GUI per session, one session per day and per actor
| Mobile client
| A company from a mobile
| Max 2M
| Worldwide
|===
====

[PRE-FILLED]
====
[cols="1,1,1,1"]
|===
| Actor | Description | Population | Location

| 
| 
| 
| 

|===
====


//üè∑{"id": "deafbeef-dead-4bed-8ace-0b0b0b0b0b0b", "labels": []}
#### Nature and Sensitivity of Data and Processing

Provide a summary of the business processes and the types of data they handle to support solution design.

WARNING: Do not reproduce the DPIA (Data Protection Impact Assessment) here, but reference it if it exists.

====
Example:

[%header,cols="2e,3e,3e,2e,1e,1e,1e,1e"]
|===
| Business Process | Purpose | Categories of Data Processed | Internal Classification | C | I | A | T

| _Ex. Issuance of certificate_ | _Produce an official record_ | _identity, civil status, technical logs_ | _High_ | _Restricted distribution_ | _High_ | _High_ | _Medium_
|===

====

[PRE-FILLED]
====
[%header,cols="2,3,3,2,1,1,1,1"]
|===
| Business Process | Purpose | Categories of Data Processed | Classification | C | I | A | T

| 
|
|
|
| 
|
| 
|
|===

[cols="1,5"]
|===
| Legend | \(C)onfidentiality (I)ntegrity (A)vailability (T)raceability / proof. Provide requirement : Low, Medium or High
| Classification | Public, Internal, Restricted distribution, Confidential
|===
====


//üè∑{"id": "3b714287-891e-4ea3-a7a4-17672caaf945", "labels": ["detail_level::overview", "constraint"]}
## Constraints

TIP: Limits and imposed choices on how you may design/implement the solution. They restrict the design space (technology, process, organization, time, budget, regulation).

//üè∑{"id": "58897e87-0c12-4139-b5da-daec9cae21c6", "labels": []}
### Budget

TIP: Give the budget constraints of the project
====
Example 1: Overall envelope of $1M
====
====
Example 2: Cloud infrastructure should cost less than $20K a month
====

//üè∑{"id": "ac5b1f28-bfcb-4543-a90b-abcff2b41822", "labels": []}
### Planning

TIP: Without detailing the project schedules, it is suggested to highlight interesting elements for the architecture.
====
Example 1: Application Launch before February 2034, prerequisite for the HEAVY program in May 2034.
====

//üè∑{"id": "5837249a-8fcc-4e42-9dd9-384c4fa32afc", "labels": ["project_size::large"]}
### Urbanization

[TIP]
====
List here the constraints relating to urbanization, this includes for example but not only:

* The rules applicable for calls between modules (SOA)
* Call rules between network zones
* The rules concerning the localization of data (MDM)
* The rules concerning the propagation of updates by events (EDA)

====
====
Example 1: Calls between two services are prohibited except service calls to a nomenclature service.
====
====
Example 2: to ensure freshness, it is forbidden to replicate data from the PERSON repository. The latter must be interrogated synchronously if necessary.
====
====
Example 3: When modifying an order, the accounting and invoicing areas will be updated asynchronously via an event.
====
====
Example 4: All the batches must be able to operate in competition with the UIs without locking the resources.
====
====
Example 5: Services cannot be called directly. The calls must be made via an exposed route at the level of the company bus which will in turn call the service. It is then possible to control, prioritize, orchestrate or manage the calls.
====
====
Example 6: The modules of this application follow the microservices architecture as defined in the reference document X.
====
====
Example 7: modules in an Internet zone cannot call modules in an Intranet zone for security reasons.
====

//üè∑{"id": "abafa462-262f-429e-aad8-d2cdc0cf15a3", "labels": []}
### Legals

List here (without detailing too much) any legal constraints related to the project.

====
Example 1: The framework contract established with the ESN XYZ provides for the transfer to our company of the copyright on the source code.
====

====
Example 2: The project code will be under the free and open source license GPL V3.
====

====
Example 3: The data exposed by the project will be licensed under CC-By.
====

====
Example 4: The EULA of the software package provides access to sources for users with shares in the company.
====

//üè∑{"id": "9352a89a-3f8b-4028-98d5-58fb970e01ef", "labels": ["detail_level::overview","requirement"]}
## Requirements

TIP: What the solution must achieve for stakeholders: capabilities, behaviors, and quality levels. They express needs/goals and are (ideally) testable. Depending on your context, feel free to add sub-sections.

//üè∑{"id": "1b2c3d4e-5f60-47a1-82b3-c4d5e6f70809", "labels": []}
### Strategic Requirements

TIP: Describe here the requirements related to the overall strategy of the project in terms of trajectory, budget, and organization.

====
Example 1: Development must be able to take place within distributed teams, each working on distinct modules.
====

====
Example 2 (migration project): Legacy modules should require as few adaptations as possible due to a lack of human resources.
====

//üè∑{"id": "38fd6aa0-2354-4d0d-9812-10ed917eae5e", "labels": []}
### Interoperability

TIP: Describe here the requirements regarding protocols, formats, and semantics to be followed to facilitate exchanges with organizations or third parties.

====
Example: Our XYZ modules must be exposed to X organizations from the Internet in the form of authenticated REST APIs.
====

//üè∑{"id": "9efde825-9508-4669-918c-7cfb0d45c21f", "labels": ["level::intermediate","detail_level::detailed"]}
### Concurrency management requirements

[TIP]
====
Specify the internal or external modules that may interfere with the application.
====
====
Example 1: All modules of this application must be able to run concurrently. In particular, batches/GUI concurrency must always be possible because the batches must be able to run during the day.
====
====
Example 2: Job X must only be executed if job Y has completed successfully, otherwise data corruption may occur.
====
====
Example 3: No other instance of job X must be executed in parallel, otherwise data corruption may occur.
====


//üè∑{"id": "afdd573d-d1f8-4958-99c1-e404592396d0", "labels": ["level::advanced","detail_level::detailed"]}
### Degraded modes
[TIP]
====
Specify the degraded application modes.
====

====
Example 1: The _mysite.com_ site must be able to continue to accept orders in the absence of the logistics department.
====
====
Example 2: If the SMTP server no longer works, the emails will be persisted then resubmitted automatically when the service is fixed.
====


//üè∑{"id": "4a3b2c1d-0e9f-4d8c-8b7a-6a5b4c3d2e1f", "labels": ["detail_level::detailed", "archiving"]}
### Archiving

[TIP]
====
Archiving is the copying of important data to a dedicated offline medium for occasional consultation, unlike backup which is intended for restoration. Archives are often required for legal reasons and kept for thirty years or more.

Specify if application data needs to be kept long-term. Specify the reasons for this archiving (usually legal).

Specify if specific integrity protection mechanisms (mainly to prevent any modification) need to be put in place.
====

====
Example 1: As required by the law, accounting data must be kept for at least ten years.
====
====
Example 2: Accounting documents must remain available online for a defined minimum period, and then be archived for long-term retention, while ensuring that their integrity can be verified cryptographically over time.
====

//üè∑{"id": "fedcba98-7654-4321-8abc-0def12345678", "labels": ["detail_level::detailed"]}
### Retention Periods

TIP: Specify here how long data and documents persisted by your application modules should be kept. Note that these durations may be legally constrained (see legal constraints above), for example in the context of the GDPR right to be forgotten.

TIP: Don't forget to mention technical data (such as logs or technical tables) as well as archives.

====
Example:

.Retention period for data and documents
[cols="1e,1e"]
|===
| Data Class | Maximum Retention Period

| Payment Data (Credit Card)
| 2 months

| Order List
| 2 years

| Access Logs
| 1 month

| Archived Accounting Data
| 30 years

|===
====

[PRE-FILLED]
====
[cols="1,1"]
|===
| Data Class | Maximum Retention Period

| 
| 


|===

====


//üè∑{"id": "b269e65b-a8c7-4518-a861-5c6c17802869", "labels": ["solution","detail_level::overview"]}
## Target architecture

//üè∑{"id": "2c107a25-a1c4-433d-b746-e12aa2c6eea1", "labels": []}
### General application architecture

[TIP]
====
Present here the application as a whole (without detailing its sub-components) in relation to the other applications of the IS. Also present the macro-data exchanged or stored.

Summarize:

 * The kind of architecture (client-server, monolithic Web, SOA, micro-service, event-driven...).
 * Large network flows between modules or between applications in the case of monoliths.
 * Any derogation to applicable architectural rules.

If the application is planned to be implemented in several stages, briefly describe the target trajectory.

====

[TIP]
====

The choice of representation is free but a C4 diagram from System Landscape or a UML2 component diagram seems the most suitable. We provide patterns and details on this topic in https://florat.net/architecture-as-code-with-c4-and-plantuml/[this article].

Numbering the steps in chronological order ensures a better understanding of the diagram. Group the sub-steps by the notation x, x.y, x.y.z, ...

Do not include specific infrastructure system (SMTP server, security device, reverse proxy, LDAP directories, etc.) which are in the domain of technical architecture. On the contrary, mention Enterprise Service Buses, API Gateway or similar infrastructure components if they play an application role (service orchestration for example).
====

====
Example: AllMyData allows a company to retrieve by email a document summarizing all the information the administration has on it. The administration can supplement its data with those of another administration. AllMyData is made up of several independent modules (GUIs, batches and APIs).
====

image::diagrams/general-application-design.svg[General application architecture diagram]

//üè∑{"id": "6390e724-c2f0-4737-99a0-531fdcfe8e20", "labels": ["detail_level::detailed"]}
### Detailed application architecture

[TIP]
====
Detail here all the modules of the application, their interdependencies, and the interactions with other applications within the information system (IS) or with partners.

The flows are logical rather than technical (for example, you can represent a direct HTTP flow between two modules even though, in reality, it passes through an intermediate load balancer: this level of detail will be provided in the infrastructure view).

Propose one or more diagrams (preferably C4 container diagrams or UML2 component diagrams). You can find further patterns and details in https://florat.net/architecture-as-code-with-c4-and-plantuml/[this article].

Ideally, the diagram should fit on an A4 page, be self-explanatory, and understandable by a non-technical person. It should become one of the most important documentation artifacts and be displayed in the war room of an agile project or printed by each developer.

====

//üè∑{"id": "f0c1b2a3-4d5e-46f7-88a9-b0c1d2e3f4a5", "labels": ["project_size::medium", "detail_level::detailed"]}
#### Principles that dictated the choices

[TIP]
====
Give here the intention in the architecture conception.
====
====
Example: we will use a monolithic and non-micro-service approach due to a lack of expertise within the IT project team.
====

//üè∑{"id": "aa11bb22-cc33-44dd-88ee-ff0011223344", "labels": ["project_size::large", "detail_level::detailed"]}
#### Inventory view

[TIP]
====
Expose the application modules in their different zones or domains.
====
====
Example: module X, Y and Z in the ACCOUNTING domain. Modules A, B in the PERSON domain.
====
image::diagrams/detailed-application-architecture-inventory.svg[Detailed application architecture diagram (inventory view)] 

//üè∑{"id": "123e4567-e89b-42d3-a456-426614174001", "labels": ["project_size::large", "detail_level::detailed"]}
#### Links between modules

[TIP]
====
Expose the dependencies between all application modules across their various zones or domains. Do not detail technical flows (such as those related to monitoring or clustering).

If (and only if) the complexity of the application justifies it, propose, in addition to this global diagram, a detailed diagram for each main communication chain by numbering the exchanges (use a sequence diagram or, preferably, a Dynamic Diagram C4).

Use a simple, non-significant, and hierarchical sequence as the ID for the flows (e.g., 1, 2.1, 2.2.3, ..., n).

For each flow, specify the protocol, a read/write/execute attribute, and a description. If the flow is asynchronous, indicate this (in the example below, the call is shown in dashed lines).

Each communication chain describes a major functionality. In cases of complex sequences, it is recommended to break down the functionality into several communication chains containing only synchronous calls (see https://florat.net/architecture-as-code-with-c4-and-plantuml/[this article]).

====

====
Example:

image::diagrams/detailed-application-architecture-dynamic.svg[Detailed application architecture diagram (dynamic view)] 

====

//üè∑{"id": "9ac6e5d2-e9a0-427e-ba12-27dedbd8ac4d", "labels": ["level::intermediate","rewrite"]}
### Transition paths

[TIP]
====
This chapter describes a required migrations from older systems.

Describe on a macroscopic scale the planned procedure as well as the rollback strategy in case of problem.

Describe, if necessary, a dry-run operation in parallel with the old system.
====
====
Example 1: The X API module will be replaced by the Y API. Then the Z Oracle database will be migrated in one-shot via a PL/SQL + DBLink script to the X instance with the new basic format of the T module.
====
====
Example 2: In the event of a problem with the new module, a rollback will be provided: the old data will be restored within two hours and the new data from the failover will be taken over by the S1 script.
====


//üè∑{"id": "d6e3eb12-371b-4c26-b538-9fea2051bfed", "labels": ["detail_level::detailed","archiving"],"link_to": ["4a3b2c1d-0e9f-4d8c-8b7a-6a5b4c3d2e1f"]}
### Archiving

[TIP]
====
Describe here the measures to meet archiving requirements. This section will mainly include:

* Technology: Ideally, for security, the archive will be duplicated on multiple media of different technologies: magnetic tape type LTO, optical disk (Blu-ray Disc Recordable for example), cloud storage (such as AWS 'Glacier' or GCP 'Coldline'), SMR mode hard drives, etc.
* A specific storage location distinct from traditional backups (e.g., Cloud, bank vault).
====

====
Example: Bank statements older than 10 years will be archived on LTO tape and hard drive. A set of each medium will be stored in a vault in two different banks.
====

//üè∑{"id": "0a1b2c3d-4e5f-4061-82a3-b4c5d6e7f809", "labels": ["detail_level::detailed"],"link_to": ["fedcba98-7654-4321-8abc-0def12345678"]}
### Purges

[TIP]
====
Describe here the technical measures to meet purge requirements.
====

====
Example 1: The consultation history will be archived by a dump with an SQL query like `COPY (SELECT * FROM my_table WHERE ...) TO '/tmp/dump.tsv'` and then purged by an SQL `DELETE` query after the operator has validated the completeness of the dump.
====

====
Example 2: Each API is responsible for purging the data it exposes. For this, plan internal processes that delete data according to a schedule (cron expression) and configurable criteria.
====


//üè∑{"id": "9f8e7d6c-5b4a-49a8-9c7d-6e5f4d3c2b1a", "labels": ["detail_level::in-depth"]}
### Matrix of application flows

[TIP]
====
List here the main network flows of the application.

Do not detail the monitoring or clustering streams for example. Indicate the type of network (LAN, WAN).
====

====
Example:  Partial example of an application flow matrix
[cols = '1e, 3e, 1e, 1e, 1e']
|===
| Source | Destination | Network type | Protocol | Mode

| Company| PC / tablet / external mobile | WAN | gui-allmydata | R
| batch-process-requests | service-compo-pdf | LAN | HTTP | C
|===
====

[PRE-FILLED]
====
[cols = '1, 3, 1, 1, 1']
|===
| Source | Destination | Network type | Protocol | Mode

| 
| 
|
|
| 

|===

_Mode: Read\(R), Write (W) or Call\(C) to a stateless system_
====